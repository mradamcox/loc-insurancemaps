{% load staticfiles %}

<div style="float:right; text-align:center; margin-top: 15px;">
  <a href="{{ svelte_params.LAYER.urls.detail }}">back to layer detail &rarr;</a>
</div>
<h1 style="font-size: 2.1em">{{ svelte_params.LAYER.title }}</h1>
<hr>
<h4>Create a mask to trim the edges of this layer.
    <a href="#" data-toggle="collapse" data-target="#help-panel">Tell me more about this... &darr;</a>
</h4>
<div
  id="help-panel"
  class="collapse"
  style="font-size:1.25em; background:lightgray; border-radius: 7px; padding:20px; margin-top:20px; margin-bottom:20px;">
  <h4><strong>Background</strong></h4>
  <p>To use our georeferenced layers most effectively, we can combine them in web maps to create a seamless mosaic. However, this often causes adjacent images to overlap and obscure each other. Consider the example below, where the layer on the left covers up the edge of the layer on the right.</p>
  <figure style="padding:10px; text-align:center;">
    <img width="100%" src="{% static 'img/alex-untrim-example.jpg' %}" />
    <figcaption style="font-style:italic; font-size:.85em;">Two georeferenced layers are shown on top of an aerial imagery basemap. The left layer overlaps the right layer.</figcaption>
  </figure>
  <p>To reduce this overlap, we can trim the edges of the left layer by creating a mask. This is just a shape that will cause everything outside of it to be clipped away. The result can look like this:</p>
  <figure style="padding:10px; text-align:center;">
    <img width="100%" src="{% static 'img/alex-trim-example.jpg' %}" />
    <figcaption style="font-style:italic; font-size:.85em;">The left layer has been trimmed to create a seamless mosaic.</figcaption>
  </figure>
  <p>The mask polygon is stored as a new trim style for the layer, and set as the default style. The layer itself is not changed, however, so don't worry about altering any underlying data through this process.</p>
  <h4><strong>Using the Interface</strong></h4>
  <p>Creating a new mask:</p>
  <ul>
    <li>Click on a corner of the layer to begin creating the polygon.</li>
    <li>Click again at each corner to continue.</li>
    <li>Double-click on the final corner to finish the polygon.</li>
    <li>The layer will be automatically be clipped when the polygon is finished.</li>
  </ul>
  <p>Adjusting the mask:</p>
  <ul>
    <li>Click and drag anywhere on the polygon to modify it.</li>
    <li>Click <i class="fa fa-refresh" title="Reset interface"></i> to reset the polygon.</li>
  </ul>
  <p>Altering an existing mask:</p>
  <ul>
    <li>If someone else has already created a mask for this layer, but it needs to be changed, go for it&mdash;this is meant to be an iterative process.</li>
    <li>Click <i class="fa fa-refresh" title="Reset interface"></i> to restore the mask to how you found it.</li>
    <li>Click <i class="fa fa-trash" title="Remove mask"></i> to remove the mask altogether from this layer.</li>
  </ul>
  <p>Tips:</p>
  <ul>
    <li>It may be easiest to outline the layer first and then zoom in to make more subtle changes.</li>
    <li>The live clipping preview may leave some extraneous piece of the layer outside the mask. You can disregard this.</li>
    <li>When viewing a trimmed layer in a web map (as shown above) you may see a <code style="color:red;">!</code> next to the layer name. This can be ignored.</li>
  </ul>
</div>